function Approximation
clc,close all,clear all
feature('DefaultCharacterSet','UTF-8');

label1 = 'Building age (years)';
label2 = 'Price (EUR / m^2)';

% data for analys [Building age (years), Price (EUR / m^2)]
A = [44	1048.4
    52	945.75
    56	329.74
    44	570.76
    44	362.97
    39	281.87
    39	809.39
    21	1108.88
    38	446.67
    46	1190.01
    41	10.3
    41	438.82
    47	604.63
    14	572.45
    57	1087.07
    52	284.97
    32	361.87
    58	795.83
    18	945.39
    30	685.94
    0	335.41
    46	498.33
    55	1142.3
    37	555.84
    51	703.67
    39	742.77
    25	428.17
    32	756.5
    25	754.51
    25	483.74
    35	488.89
    38	336.08
    37	981.36
    27	452.42
    42	601.81
    49	795.49
    61	689.2
    31	466.41
    25	743.67
    60	417.32
    19	458.78
    38	737.76
    46	752.52
    43	652.68
    19	817.15
    21	1100.32
    28	467.36
    20	407.57
    38	395.57
    30	442.41
    31	823.34
    42	331.1
    31	668.51
    28	400.75
    29	418.86
    52	900.9
    0	1563.26
    48	1037.41
    23	588.96
    33	509.48
    98	4.09
    34	477.27
    28	1241.94
    91	168.61
    60	512.62
    34	1236.28
    9	900.49
    99	522.07
    0	1394.47
    78	361.84
    42	573.73
    30	672.84
    3	1567.21
    6	936.7
    52	504.2
    39	466.2
    44	803.48
    37	1016.73
    41	967.64
    29	550.56
    30	754.02
    23	782.01
    8	1237.28
    20	37.84
    27	562.71
    47	222.1
    35	1012.91
    50	735.26
    40	336.38
    9	757.63
    41	198.09
    38	487.58
    43	501.83
    55	832.5
    79	221.62
    50	771.98
    33	741.35
    31	851.52
    33	23.42
    43	577.4
    60	612.16
    48	601.2
    21	534.44
    38	432.43
    37	585.73
    36	669.92
    39	585.39
    41	544.23
    42	519.88
    1	669.06
    35	773.91
    51	879.91
    38	1434.33
    0	1530.94
    33	267.29
    47	728.65
    39	870.18
    33	450.39
    7	1110.85
    1	755.77
    37	454.59
    78	1544.23
    39	588.76
    40	456.36
    40	626.36
    32	461.18
    45	701.31
    39	670.51
    40	453.67
    26	368.19
    78	1211.8
    39	678.47
    33	277.04
    39	590.71
    36	544.23
    25	25.81
    36	853.53
    45	750.47
    49	750
    27	983.76
    21	487.71
    25	545.88
    25	70.43
    34	1184.27
    17	114.26
    31	459.28
    38	2052.82
    44	128.48
    31	602.84
    28	615.32
    25	361.27
    27	690.43
    40	460.51
    72	417.12
    29	1024.59
    45	608.2
    42	383.16
    25	1040.93
    46	194.7
    80	725.69
    28	434.09
    2	1065.12
    89	920.14
    26	1730.51
    39	453.23
    24	442.47
    5	1568.1
    20	1187.36
    38	433.27
    31	669.48
    36	494.51
    39	789.32
    32	1130.44
    24	834.88
    36	852.73
    46	879.82
    24	383.77
    44	162.45
    24	1150.01
    51	344.01
    30	235.39
    5	1139.14
    19	1277.27
    40	422.04
    0	1219.86
    59	1023.25
    28	496.41
    20	521.77
    44	780.52
    43	882.43
    30	731.08
    48	610.91
    26	945.96
    30	428.85
    48	741.05
    30	659.28
    2	912.82
    2	734.96
    26	862.21
    43	439.92
    41	706.39
    42	142.85
    57	857.83
    46	340.25
    26	742.77
    53	862.84
    47	554.9
    37	655.96
    35	807.3
    1	852.83
    38	1214.34
    27	474.14
    35	236.34
    26	537.78
    42	1680.36
    28	770.64
    34	726.83
    34	203.38
    2	1225.22
    49	624.08
    30	705.63
    40	133.32
    30	593.51
    53	872.44
    54	294.66
    40	1217.72
    83	829.15
    31	740.65
    31	1289.39
    85	1511.82
    51	402.9
    44	700.93
    39	590.21
    26	680.88
    47	977.1
    0	1254.75
    81	820.69
    51	574.03
    42	491.6
    9	1006.33
    22	627.79
    0	1257.39
    8	1157.85
    50	403.8
    28	388.96
    27	1073.37
    38	491.26
    34	487.37
    29	364.44
    37	336.3
    45	671.67
    33	249.07
    28	604.57
    70	688.75
    29	1031.57
    1	1145.71
    29	707.12
    40	347.15
    54	886.22
    56	619.9
    56	801.17
    33	349.45
    35	527.43
    36	982.8
    25	618.85
    77	860.63
    60	997.34
    41	413.74
    39	271.74
    45	654.73
    49	1782.76
    39	516.71
    31	566.01
    27	782.61
    21	553.27
    50	697.13
    38	423.3
    39	689.26
    42	631.21
    0	1097.66
    47	610.04
    31	659.61
    36	538.2
    36	236.1
    36	847.53
    85	667.56
    31	789.86
    52	305.31
    35	593.98
    38	705.84
    44	848.31
    28	434.27
    24	201.79
    8	926.32
    47	546.36
    29	468.37
    28	245.13
    22	552.11
    1	1217.13
    54	771.57
    27	643.83
    43	597.96
    1	1174.47
    46	504.66
    22	1223.68
    37	616.21
    36	529.97
    28	603.05
    51	485.35
    0	1282.01
    60	868.5
    82	1011.74
    25	40.35
    38	800.71
    72	318.15
    50	404.01
    29	560.33
    45	783.65
    38	544.91
    33	551.79
    0	1420.52
    43	698.86
    39	453.23
    0	1120.85
    23	580.37
    26	865.68
    34	1218.81
    24	1055.33
    40	518.23
    25	1312.8
    30	508.27
    36	475.34
    23	8.68
    41	483.02
    74	841.18
    27	510.24
    34	632.91
    36	542.88
    39	1239.73
    20	532.25
    51	268.1
    21	779.98
    53	813.74
    2	1867.78
    51	785.34
    29	766.8
    2	1343.57
    45	837.93
    44	881.73
    40	520.04
    48	724.47
    25	389.24
    71	484.85
    30	532.13
    28	456.67
    42	723.16
    30	727.41
    25	380.95
    40	616.01
    43	494.64
    21	694.13
    1	1282.8
    95	741.98
    43	798.28
    50	1036.91
    9	747.31
    30	536.97
    38	322.52
    47	582.95
    50	857.8
    32	473.82
    37	477.52
    52	728.04
    27	879.82
    44	106.85
    34	568.69
    28	416.81
    32	804.03
    30	437.76
    38	794.93
    38	470.18
    15	1062.99
    85	394.35
    22	436.72
    62	450.56
    20	580.74
    17	329.94
    47	632.78
    42	433.65
    1	1592.91
    44	614.69
    22	1112.09
    56	440.19
    45	483.78
    0	1086.08
    0	1367.54
    39	505.15
    1	1325.44
    9	370.48
    18	767.76
    42	417.79
    24	595.6
    51	604.21
    11	850.36
    41	362.14
    50	758.96
    30	1043.64
    27	629.11
    38	514.59
    27	927.96
    45	355.01
    27	642.73
    46	827.49
    75	520.19
    26	348.62
    44	133.13
    3	725.81
    19	562.55
    30	480.85
    0	1302.53
    31	595.66
    26	1155.71
    33	678.64
    79	357.27
    30	650.66
    19	17.5
    44	995.81
    98	1138.74
    23	727.27
    36	544.74
    45	541.97
    80	1304.86
    22	310.25
    32	462.62
    25	416
    24	924.2
    26	576.51
    28	424.87
    43	486.86
    4	1217.91
    47	749.5
    41	971.86
    20	668.43
    79	5.72
    44	467.13
    44	593.95
    28	450.6
    40	585.88
    41	481.27
    26	726.91
    9	757.58
    38	623.63
    18	745.57
    80	679.46
    1	1085.01
    41	333.28
    43	268.79
    38	884.34
    44	1042.03
    25	738.13
    35	462.62
    50	483.63
    19	388.96
    31	472.55
    56	1947.6
    14	1570.82
    26	731.63
    26	1157.61
    26	773.77
    31	439.64
    27	576.81
    31	1182.28
    51	722.14
    49	467.6
    77	906.95
    46	690.37
    23	515.64
    45	591.97
    34	520.81
    78	1392.29
    31	629.83
    43	758.17
    77	977.15
    19	551.27
    29	549.04
    44	800.4
    40	706.51
    46	885.58
    2	502.58
    75	1324.19
    21	526.01
    50	400
    2	389.31
    23	390.74
    41	439.66
    44	779.2
    57	422.8
    49	1014.66
    52	431.15
    28	666.36];
    
    % formating X an Y arrays
    X = A(:, 1);    Y = A(:, 2);
    
    % ploting initial data
    xmin=min(X);ymin=min(Y);xmax=max(X);ymax=max(Y); %
    figure(1),hold on, axis([xmin,xmax,ymin,ymax]);grid on;

    xlabel(label1, 'fontweight','bold','fontsize',12);
    ylabel(label2,'fontweight','bold','fontsize',12)
    cla, plot(X,Y,'.r');

 	m = 4; % total base functions

    % obtaining values of function G
    G=base(m,X);
    c=(G'*G)\(G'*Y);

    % ploting approximation curve
    nnn=200; 
    xxx=[xmin:(xmax-xmin)/(nnn-1):xmax]; %visualization points 
    Gv=base(m,xxx);
    fff=Gv*c;
    plot(xxx,fff,'b-');
    
return
end

% constructing matrix G
function G=base(m,x)
     for i=1:m,  
        G(:,i)=x.^(i-1);
     end
return
end
